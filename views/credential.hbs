<html lang='en'>
  <head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <title>Credential - {{subject.first_name}} {{subject.last_name}}</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #f5e6f5;
        color: #333;
      }

      header {
        background: #fff;
        padding: 1rem;
        text-align: center;
        border-bottom: 1px solid #ddd;
      }

      header img {
        height: 60px;
        margin-bottom: 0.5rem;
      }

      .container {
        padding: 2rem;
      }

      .card {
        background: #fff;
        border: 1px solid #e0c1e0;
        border-radius: 10px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
      }

      .flex-row {
        display: flex;
        gap: 2rem;
      }

      .key-box,
      .value-box {
        padding: 1rem;
        border-radius: 10px;
      }

      .key-box {
        background-color: #e0c1e0;
        color: #800080;
        min-width: 200px;
      }

      .value-box {
        background-color: #f3d9f3;
        flex: 1;
      }

      .value-box > p {
        margin: 0.8rem 0;
        font-size: 1rem;
        line-height: 1.4;
      }

      /* Documents - perfectly aligned, name and URL one below the other */
      .documents ul {
        padding-left: 0;
        margin: 1rem 0;
        list-style: none;
        counter-reset: doc-counter;
      }

      .documents li {
        counter-increment: doc-counter;
        margin-bottom: 1.4rem;
        display: flex;
        align-items: flex-start;
        line-height: 1.6;
      }

      .documents .doc-index {
        font-weight: bold;
        min-width: 40px;
        color: #800080;
        flex-shrink: 0;
        padding-top: 0.2rem; /* vertically align with first line of name */
      }

      .documents .doc-index::after {
        content: counter(doc-counter) '.';
      }

      .documents .doc-details {
        flex: 1;
      }

      .documents .doc-name {
        font-weight: normal;
        font-size: 1rem;
        color: #333;
        display: block;
        margin-bottom: 0.4rem;
      }

      .documents .doc-url {
        display: block;
        color: #0066cc;
        text-decoration: underline;
        font-size: 1rem;
        word-break: break-all;
        margin-left: 0; /* no extra indent - aligned directly below name */
      }
    </style>
  </head>
  <body>
    <header>
      <img src='{{logoBase64}}' alt='Logo' />
      <h1>The Ability Network</h1>
    </header>

    <main class='container'>
      <!-- Issued Credential -->
      <div class='card'>
        <h2>Issued Credential</h2>
        <div class='flex-row'>
          <div class='key-box'>
            <p>ID:</p>
            <p>Type:</p>
            <p>Issued On:</p>
            <p>Expires On:</p>
          </div>
          <div class='value-box'>
            <p>{{credential.id}}</p>
            <p>{{credential.type}}</p>
            <p>{{credential.issuanceDate}}</p>
            <p>{{credential.expirationDate}}</p>
          </div>
        </div>
      </div>

      <!-- Credential Subject -->
      <div class='card'>
        <h2>Credential Subject</h2>
        <div class='flex-row'>
          <div class='key-box'>
            {{#each subject}}
              {{#unless (eq @key 'documents')}}
                <p>{{@key}}:</p>
              {{/unless}}
            {{/each}}
            {{#if subject.documents}}
              <p>Documents:</p>
            {{/if}}
          </div>

          <div class='value-box'>
            {{#each subject}}
              {{#unless (eq @key 'documents')}}
                <p>{{this}}</p>
              {{/unless}}
            {{/each}}

            {{#if subject.documents}}
              <div class='documents'>
                <ul>
                  {{#each subject.documents}}
                    <li>
                      <span class='doc-index'></span>
                      <div class='doc-details'>
                        <span class='doc-name'>{{name}}</span>
                        {{#if url}}
                          <a
                            href='{{url}}'
                            target='_blank'
                            class='doc-url'
                          >{{url}}</a>
                        {{/if}}
                      </div>
                    </li>
                  {{/each}}
                </ul>
              </div>
            {{/if}}
          </div>
        </div>
      </div>
    </main>
  </body>
</html>